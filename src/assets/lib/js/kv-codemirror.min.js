/*!
 * @copyright Copyright &copy; Kartik Visweswaran, Krajee.com, 2014 - 2019
 * @package yii2-editors
 * @version 1.0.0
 *
 * Krajee Codemirror jQuery plugin
 */
!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(window.jQuery)}(function(e){"use strict";var t;(t=function(t,o){this.$element=e(t),this.options=o,this.init()}).prototype={constructor:t,init:function(){this.editor=CodeMirror.fromTextArea(this.$element[0],this.options),this.disabled=this.$element.attr("disabled"),this.initToolbar()},initToolbar:function(){var t=this.editor,o=this.$element.closest(".kv-cm-container"),r=o.find(".kv-cm-toolbar"),a=function(e,o){t.commentRange(o,e.from,e.to)};this.disabled||(r.find("[data-tooltips]").tooltip({trigger:"hover"}),r.find("button").on("click",function(){var r=e(this),n={from:t.getCursor(!0),to:t.getCursor(!1)},i=n.from===n.to,s=r.attr("data-action");switch(s){case"undo":t.undo();break;case"redo":t.redo();break;case"selectall":t.execCommand("selectAll");break;case"fullscreen":o.hasClass("fullscreen")?(o.removeClass("fullscreen"),r.removeClass("active")):(o.addClass("fullscreen"),r.addClass("active"));break;default:if(i&&"paste"!==s)break;switch(s){case"copy":case"cut":case"paste":if("paste"!==s){var c=e(document.createElement("textarea")).appendTo("body").css({height:"1px",width:"1px"});c.val(t.getSelection()),c[0].select(),document.execCommand("copy"),c.remove()}else navigator.clipboard.readText().then(function(e){t.getDoc().replaceSelection(e)}).catch(function(e){window.console.log("Unable to read clipboard contents.",e)});"cut"===s&&t.getDoc().replaceSelection("");break;case"indent":t.execCommand("indentMore");break;case"outdent":t.execCommand("indentLess");break;case"comment":a(n,!0);break;case"format":t.autoFormatRange(n.from,n.to);break;case"uncomment":a(n,!1)}}}))},save:function(){this.editor.save()},destroy:function(){this.editor.toTextArea(),this.editor=null}},e.fn.kvCodemirror=function(o){var r=Array.apply(null,arguments),a=[];switch(r.shift(),this.each(function(){var n,i=e(this),s=i.data("kvCodemirror"),c="object"==typeof o&&o;s||(n=e.extend(!0,{},e.fn.kvCodemirror.defaults,c,i.data()),s=new t(this,n),i.data("kvCodemirror",s)),"string"==typeof o&&a.push(s[o].apply(s,r))}),a.length){case 0:return this;case 1:return a[0];default:return a}},e.fn.kvCodemirror.defaults={}});